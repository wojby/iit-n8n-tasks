# L10, Exercise B -- Webhook → Jina.ai → Groq (LLM) → Structured Output

## Goal

Create an **n8n** workflow that accepts a URL via a **Webhook**,
retrieves readable page content using **Jina.ai**, processes this
content with a **Groq-hosted LLM (OpenAI-compatible API)**, and returns
a **structured JSON response**.

This exercise focuses on building a simple **AI processing pipeline**
that combines external data retrieval with large language model
reasoning.

------------------------------------------------------------------------

## Overview of the Workflow

Your workflow must implement the following sequence:

**Webhook (URL as input) → Jina.ai (content retrieval) → Groq LLM
(structuring) → Respond to Webhook**

------------------------------------------------------------------------

## Step 0: Prerequisites

Before starting:

-   Make sure `GROQ_API_KEY` is configured as an environment variable
    and accessible in n8n via `{{$env.GROQ_API_KEY}}`.
-   Ensure your n8n instance has outbound internet access.
-   Use **test URLs** that are publicly accessible.

------------------------------------------------------------------------

## Step 1: Create a New Workflow

1.  Start **n8n** in your Codespace or local environment.
2.  Go to **Workflows → + New**.
3.  Name the workflow:

    L10_ExerciseB_<your_github_username>

**NOTE:** You will need to provide screenshots confirming the workflow
name and configuration.

------------------------------------------------------------------------

## Step 2: Add a Webhook Node (Input)

1.  Add a **Webhook** node.
2.  Configure:
    -   **HTTP Method:** `GET`
    -   **Path:** `l10/process`
    -   **Response Mode:** `Using "Respond to Webhook" node`

### Input parameter

The webhook must accept the following query parameter:

-   `url` -- a full URL to a public web page (required)

Example:

    http://[YOUR_CODESPACE_URL]/webhook-test/l10/process?url=https://example.com

------------------------------------------------------------------------

## Step 3: Retrieve Content Using Jina.ai

1.  Add an **HTTP Request** node after the Webhook.
2.  Configure it to fetch readable content from Jina.ai. Correct URL in this node should be in the format `https://r.jina.ai/www.example.com`, but actual website address should be taken from the Webhook step.

### Requirements

-   The request must use the URL provided by the Webhook.
-   The response should contain the **main textual content** of the
    page.
-   No API key is required for Jina.ai.

Correct output from Jina may look as follows:

```
[
  {
    "data": "Title: Example Domain\n\nURL Source: http://www.example.com/\n\nPublished Time: Wed, 17 Dec 2025 03:51:06 GMT\n\nWarning: This page maybe not yet fully loaded, consider explicitly specify a timeout.\n\nMarkdown Content:\nExample Domain\n===============\n\nExample Domain\n==============\n\nThis domain is for use in documentation examples without needing permission. Avoid use in operations.\n\n[Learn more](https://iana.org/domains/example)\n"
  }
]
```

**NOTE:** If the page content is very long, you should limit the amount
of text passed further in the workflow (e.g., by truncating it).

------------------------------------------------------------------------

## Step 4: Process Content with Groq (LLM)

1.  Add another **HTTP Request** node after the Jina.ai step.
2.  Configure it to call the Groq Chat Completions API.
3.  Use the text retrieved from Jina.ai as input to the model.

### LLM task

The model must:

-   Analyze the provided text
-   Return **only valid JSON**
-   Follow the schema below exactly

### Required output schema

``` json
{
  "title": "string or null",
  "summary_short": "string (max 300 characters)",
  "key_points": ["string", "string", "string"],
  "tags": ["string", "string", "string"],
  "source_url": "string"
}
```

### Important constraints

-   The output **must be valid JSON only**
-   No Markdown, no explanations, no extra text
-   If a field cannot be determined, use `null`

------------------------------------------------------------------------

## Step 5: Respond to the Webhook

1.  Add a **Respond to Webhook** node.
2.  Configure:
    -   **Response Code:** `200`
    -   **Respond With:** `All incoming items` or `Text` (JSON only)

The response returned to the client must be the JSON generated by the
LLM.

------------------------------------------------------------------------

## Step 6: Test the Workflow

1.  Click **Execute Workflow**.
2.  Call the test endpoint with a valid URL.

Example:

    http://[YOUR_CODESPACE_URL]/webhook-test/l10/process?url=https://en.wikipedia.org/wiki/Artificial_intelligence

Verify that: - The workflow executes without errors - The response is
valid JSON - All required fields are present

------------------------------------------------------------------------

## Example Output (Shape Only)

``` json
{
  "title": "Artificial intelligence",
  "summary_short": "Artificial intelligence is a field of computer science focused on creating systems capable of performing tasks that normally require human intelligence.",
  "key_points": [
    "AI focuses on intelligent behavior",
    "It includes machine learning techniques",
    "AI systems are used in many industries"
  ],
  "tags": ["AI", "computer science", "technology"],
  "source_url": "https://en.wikipedia.org/wiki/Artificial_intelligence"
}
```

------------------------------------------------------------------------

## Submission Requirements

Include the following in your repository:

-   A Markdown report file: `L10/solutions/L10_ExerciseB.md`
-   Screenshots:
    -   Named workflow visible in n8n
    -   Jina.ai HTTP Request configuration
    -   Groq HTTP Request configuration (headers and body)
    -   Successful execution result
-   All screenshots must show the browser address bar

------------------------------------------------------------------------

## Notes and Hints

-   Use expressions in n8n to pass data between nodes.

-   Make sure the `Authorization` header uses:

        Bearer {{$env.GROQ_API_KEY}}

    as an **expression**, not plain text.

-   If the workflow fails, return a clear error message rather than an
    empty response.
